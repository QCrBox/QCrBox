ARG QCRBOX_DOCKER_TAG
FROM qcrbox/base-ancestor:${QCRBOX_DOCKER_TAG}
SHELL ["/bin/bash", "-c"]

ARG QCRBOX_REGISTRY_DB_DIR=/mnt/qcrbox_registry_data/
RUN mkdir -p ${QCRBOX_REGISTRY_DB_DIR}
RUN chown ${APP_USER}:${APP_USER} ${QCRBOX_REGISTRY_DB_DIR}
VOLUME ${QCRBOX_REGISTRY_DB_DIR}

ARG QCRBOX_SUPERVISORD_CONF_DIR=${QCRBOX_SUPERVISORD_CONF_DIR}
COPY supervisord.qcrbox_registry_server.conf ${QCRBOX_SUPERVISORD_CONF_DIR}/
