version: "0.5"

vars:
  QCRBOX__NATS__PORT: "4222"
  QCRBOX__NATS__MANAGEMENT_PORT: "8222"
  QCRBOX__NATS__STORE_DIR: ".local_data/nats_store"

processes:
  nats-server:
    command: |
      nats-server \
        --jetstream \
        --port={{ or "${QCRBOX__NATS__PORT}" .QCRBOX__NATS__PORT }} \
        -m {{ or "${QCRBOX__NATS__MANAGEMENT_PORT}" .QCRBOX__NATS__MANAGEMENT_PORT }} \
        --store_dir={{ or "${QCRBOX__NATS__STORE_DIR}" .QCRBOX__NATS__STORE_DIR }} \
        --server_name=qcrbox-nats
    availability:
      restart: "always"

  jupyterlab-examples:
    command: "jupyter lab --ip=0.0.0.0 --port=18433 --no-browser --notebook-dir=./docs/tutorials/examples/"
    availability:
      restart: "always"

  jupyterlab-playground:
    command: "jupyter lab --ip=0.0.0.0 --port=18434 --no-browser --notebook-dir=./playground/"
    availability:
      restart: "always"
